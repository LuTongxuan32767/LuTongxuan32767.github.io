if(!window.ko){alert("need knockoutjs")}zhszpjnav.koObj={topMenu:ko.observableArray([]),active:ko.observable("")};zhszpjnav.menuSelected=function(){var b=document.location.href;var f=b.indexOf(zhszpjnav.appName);var c=b.substring(f);var d=c.substring(c.lastIndexOf(".htm")+4,c.lastIndexOf(".htm")+5);if(c.lastIndexOf("?")>0&&d=="?"&&c.lastIndexOf("?mid=")>0){}else{if(c.indexOf(".htm")>0){c=c.substring(0,c.lastIndexOf(".htm")+4)}}if(c=="/"+zhszpjnav.appName+"/"||c==zhszpjnav.appName||c==zhszpjnav.appName+"/"){c=zhszpjnav.appName+"/web/index/yhIndex.htm"}var i=$("#_navbanner");var h=i.find("ul>li>a[href*='"+c+"']");if(h==null||h.length<1){h=i.find("ul>li>a[href*='"+zhszpjnav.topMenu+"']")}var a=h.parent().attr("class");if(a==undefined||a=="secondMenu"){h.parent().siblings().removeClass("active");h.parent().addClass("active");h.parents(".topMenu").addClass("active");var g=h.parents(".topMenu").find("a").attr("href");var e=$(h.parents(".topMenu").find("a")[0]).text();if(g==undefined||g==zhszpjnav.appName+"/"){g="javascript:void(0);"}head.level1=g;head.text1=e;head.level2=h.attr("href");head.text2=h.text()}else{$(h.parents(".topMenu")[0]).addClass("active");head.level1=h.attr("href");head.text1=$(h[0]).text()}head.show()};zhszpjnav.getMenu=function(){$.ajax({url:zhszpjnav.url+"?method=getTopMenu",type:"post",data:"callBack=?",success:function(a){if(a.children==null||a.children=="null"){emsg.dialog({title:"系统消息",text:"加载菜单出错啦！",timer:2000});return}$.each(a.children,function(b,c){zhszpjnav.koObj.topMenu.push(c)})},error:function(a){emsg.dialog({title:"系统消息",text:"出错啦！",timer:2000})},complete:function(a,b){zhszpjnav.menuSelected()}})};$(function(){var d=document.getElementById("_navbanner");if(!d){alert("no _navbanner found");return}var c=document.location.href;var b=c.indexOf(zhszpjnav.appName);var a=c.substring(b);ko.applyBindings(zhszpjnav.koObj,d);zhszpjnav.getMenu();$("#_navbanner").on("mouseover",".topMenu",function(e){e.stopPropagation();var g=$(this).find("#topMenu").attr("href");if(g==undefined||g==zhszpjnav.appName+"/"){$(this).find("#topMenu").css("cursor","default");$(this).find("#topMenu").attr("href","javascript:void(0);")}var f=$(this).find("ul>li>a");if(f.html()==undefined||f.html()==null){$(this).find("a").next("div").hide()}});$("#_navbanner").on("click",".topMenu",function(f){f.stopPropagation();var e=$(this).find("a").attr("href");if(e=="javascript:void(0);"){return}$.ajax({url:zhszpjnav.url+"?method=setTopMenuToSession",type:"post",data:"topMenu="+e,success:function(g){},error:function(g){}})});$("#_navbanner").on("click",".secondMenu",function(f){f.stopPropagation();var e=$(this).find("a").attr("href");if(e=="javascript:void(0);"){return}$.ajax({url:zhszpjnav.url+"?method=setTopMenuToSession",type:"post",data:"topMenu="+e,success:function(g){},error:function(g){}})})});$(function(){$(".modal").modal({backdrop:"static",keyboard:false,show:false})});